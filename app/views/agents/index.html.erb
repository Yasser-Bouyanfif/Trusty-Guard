<div class="container mt-5">
  <h1>Mes agents</h1>
  <div class="d-flex justify-content-between" data-controller="search_bar">
    <!-- <form id="agent-search-form" class="d-flex" data-controller="search-bar" data-action="turbo:submit-end->search-bar#search">
      <input class="form-control me-2 rounded-4" type="search" placeholder="Search" aria-label="Search" data-target="search-bar.input">
      <button class="btn btn-outline-success rounded-4" type="submit">Search</button>
    </form> -->
 <%= form_with url: agents_path, method: :get, data: { search_bar_target: 'searchInput' } do |f| %>
  <%= f.text_field :query,
    class: "form-control me-2 rounded-4",
    placeholder: 'Rechercher un agent',
    value: params[:query],
    data: {
      search_bar_target: 'searchInput',
      action: "keyup->search-bar#update"
    } %>
<% end %>

  <div data-search-bar-target="list">
  </div>
  
    <%# <%= render "agents/list" %>

    <%= link_to 'Ajouter un agent', new_agent_path, class: "btn btn-outline-primary rounded-4", role: "button" %>
  </div>

  <br>

  <table  class="table table-dark table-hover text-center">
    <thead class="table-dark">
      <tr>
        <th>Nom</th>
        <th>Pr√©nom</th>
        <th>Actions</th>
        <th>Voir</th>
      </tr>
    </thead>
    <tbody id="agents-table">
      <% @agents.each do |agent| %>
        <tr>
          <td><%= agent.last_name %></td>
          <td><%= agent.first_name %></td>
          <td>
            <%= link_to 'Voir', agent_path(agent) %>
            <%= link_to 'Editer', edit_agent_path(agent) %>
            <%= link_to 'Supprimer', agent_path(agent), data: { turbo_method: :delete } %>
          </td>
          <td>
            <%= link_to 'Voir', agent_path(agent) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
